{{ $img := .Page.Resources.GetMatch .src }}
{{ if $img }}
  {{ $small := $img.Resize "300x" }}
  {{ $medium := $img.Resize "450x" }}
  {{ $large := $img.Resize "600x" }}

  <figure style="height: 100%; width: 100%;">
    <img
      src="{{ $medium.RelPermalink }}"
      srcset="{{ $small.RelPermalink }} 320w, {{ $medium.RelPermalink }} 600w, {{ $large.RelPermalink }} 1200w"
      sizes="(max-width: 768px) 300px, (max-width: 1200px) 450px, 600px"
      alt="{{ .alt }}"
      loading="lazy"
      decoding="async"
      style="height: 100%; width: 100%;"
    />
    {{ if .caption }}
      <figcaption>{{ .caption }}</figcaption>
    {{ end }}
  </figure>
{{ else }}
  <p>Image not found: {{ .src }}</p>
{{ end }}
